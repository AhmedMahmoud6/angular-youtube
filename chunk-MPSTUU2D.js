import{a as S,b as q,c as B,d as G,e as J,h as K,i as X}from"./chunk-SFLZJJ5R.js";import{Aa as Q,C as d,E,Fa as Z,Ga as b,J as h,K as T,L as l,M,N as _,Na as j,Q as c,S as N,Sa as $,W as s,X as r,Y as a,Z as p,ba as O,ca as P,ea as R,ga as k,ha as v,ka as L,la as W,ma as U,na as F,oa as H,ra as u,sa as f,u as g,v as y,va as A,w as I,wa as Y,za as z}from"./chunk-4JN4A7YZ.js";var ne=i=>["/video",i];function oe(i,t){if(i&1&&(r(0,"div",15),p(1,"img",16),r(2,"p"),u(3),a()()),i&2){let e,n=t.ngIf,o=v(2);H("opacity",o.previewVisible()?0:1)("transition","opacity 0.28s ease"),l(),s("src",n,h)("alt",(e=o.finalVideo().videoDetails.snippet)==null?null:e.title),l(2),f(o.formatYouTubeDuration(o.finalVideo().videoDetails.contentDetails.duration))}}function re(i,t){if(i&1&&(r(0,"div",15),p(1,"img",16),a()),i&2){let e,n,o=v(2);l(),s("src",(e=o.finalVideo())==null||e.videoDetails==null||e.videoDetails.snippet==null||e.videoDetails.snippet.thumbnails==null||e.videoDetails.snippet.thumbnails.high==null?null:e.videoDetails.snippet.thumbnails.high.url,h)("alt",(n=o.finalVideo())==null||n.videoDetails==null||n.videoDetails.snippet==null?null:n.videoDetails.snippet.title)}}function le(i,t){if(i&1&&(r(0,"div",17),p(1,"iframe",18),a()),i&2){let e=t.ngIf;l(),s("src",e,T)}}function ae(i,t){if(i&1){let e=R();r(0,"div",2),k("mouseenter",function(){y(e);let o=v();return I(o.showPreview())})("mouseleave",function(){y(e);let o=v();return I(o.hidePreview())}),r(1,"div",3),c(2,oe,4,7,"div",4)(3,re,2,2,"ng-template",null,0,Y)(5,le,2,1,"div",5),a(),r(6,"div",6)(7,"div",7),p(8,"img",8),a(),r(9,"div",9)(10,"div",10),u(11),a(),r(12,"div",11),u(13),a(),r(14,"div",12)(15,"p",13),u(16),a(),r(17,"span"),u(18,"\u2022"),a(),r(19,"p",14),u(20),a()()()()()}if(i&2){let e,n,o,w,x,C,ee=F(4),m=v();s("routerLink",A(9,ne,m.finalVideo().videoDetails.id)),l(2),s("ngIf",(e=m.finalVideo())==null||e.videoDetails==null||e.videoDetails.snippet==null||e.videoDetails.snippet.thumbnails==null||e.videoDetails.snippet.thumbnails.maxres==null?null:e.videoDetails.snippet.thumbnails.maxres.url)("ngIfElse",ee),l(3),s("ngIf",m.iframeSrc()),l(3),s("src",(n=m.finalVideo())==null?null:n.channelProfilePic,h),l(3),f((o=m.finalVideo())==null?null:o.videoDetails.snippet.title),l(2),f((w=m.finalVideo())==null?null:w.videoDetails.snippet.channelTitle),l(3),f(m.formatViews((x=m.finalVideo())==null?null:x.videoDetails.statistics.viewCount)),l(4),f(m.timeAgo((C=m.finalVideo())==null?null:C.videoDetails.snippet.publishedAt))}}var V=class i{constructor(t){this.youtubeService=t}video=Q();channel=d([]);finalVideo=d(void 0);previewVisible=d(!1);iframeSrc=d(null);timerId;sanitizer=g(j);formatViews=B;timeAgo=q;formatYouTubeDuration=J;ngOnInit(){let t=this.video();t?.snippet.channelId&&this.youtubeService.getChannel(t.snippet.channelId).subscribe(e=>{this.channel.set(e.items),this.finalVideo.set(G(this.video(),this.channel()))})}showPreview(){this.timerId=setTimeout(()=>{let t=this.finalVideo()?.videoDetails?.id;if(!t)return;let e=new URLSearchParams({autoplay:"1",mute:"1",controls:"0",rel:"0",modestbranding:"1",playsinline:"1",loop:"1",playlist:t}),n=`https://www.youtube.com/embed/${t}?${e.toString()}`;this.iframeSrc.set(this.sanitizer.bypassSecurityTrustResourceUrl(n)),this.previewVisible.set(!0)},300)}hidePreview(){this.previewVisible.set(!1),this.iframeSrc.set(null),clearTimeout(this.timerId)}static \u0275fac=function(e){return new(e||i)(M(S))};static \u0275cmp=_({type:i,selectors:[["app-video-card"]],inputs:{video:[1,"video"]},decls:1,vars:1,consts:[["fallbackImg",""],["class","video card ",3,"routerLink","mouseenter","mouseleave",4,"ngIf"],[1,"video","card",3,"mouseenter","mouseleave","routerLink"],[1,"video-media"],["class","video-img",3,"opacity","transition",4,"ngIf","ngIfElse"],["class","video-preview",4,"ngIf"],[1,"video-info"],[1,"left-side"],["alt","Channel pfp",3,"src"],[1,"center"],[1,"video-title"],[1,"channel-title"],[1,"video-more-info"],[1,"video-views"],[1,"video-date"],[1,"video-img"],[3,"src","alt"],[1,"video-preview"],["width","100%","height","100%","frameborder","0","allow","autoplay; encrypted-media; picture-in-picture","allowfullscreen","",3,"src"]],template:function(e,n){e&1&&c(0,ae,21,11,"div",1),e&2&&s("ngIf",n.finalVideo())},dependencies:[b,$],encapsulation:2})};var se=["sentinel"];function de(i,t){if(i&1&&p(0,"app-video-card",5),i&2){let e=t.$implicit;s("video",e)}}function me(i,t){i&1&&(O(0),r(1,"div",6),p(2,"mat-progress-spinner",7),a(),P())}var D=class i{youtubeService=g(S);ngZone=g(N);videos=d([]);nextPageToken=d(void 0);isLoading=d(!1);error=d(null);homeSetupDone=d(!1);homeSentinel;sharedObserver=K(this.ngZone,{root:null,rootMargin:"300px",threshold:1});set homeSectionRef(t){let e=this.videos();this.homeSentinel=t.nativeElement??void 0,!this.homeSetupDone()&&this.homeSentinel&&e&&(this.homeSetupDone.set(!0),this.sharedObserver?.observeElement(this.homeSentinel,{isLoading:this.isLoading,nextPageToken:this.nextPageToken,youtubeService:this.youtubeService,loadWhat:"videos",error:this.error,videos:this.videos}))}ngAfterViewInit(){}ngOnDestroy(){this.sharedObserver?.unobserveElement(this.homeSentinel),this.sharedObserver?.disconnect()}constructor(){z(()=>{})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["app-home"]],viewQuery:function(e,n){if(e&1&&L(se,5,E),e&2){let o;W(o=U())&&(n.homeSectionRef=o.first)}},decls:5,vars:2,consts:[["sentinel",""],[1,"app-container"],[3,"video",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"sentinel"],[3,"video"],[1,"loading-spinner"],["mode","indeterminate","diameter","50","strokeWidth","4"]],template:function(e,n){e&1&&(r(0,"div",1),c(1,de,1,1,"app-video-card",2),a(),c(2,me,3,0,"ng-container",3),p(3,"div",4,0)),e&2&&(l(),s("ngForOf",n.videos()),l(),s("ngIf",n.isLoading()))},dependencies:[V,Z,X,b],encapsulation:2})};var He=[{path:"",component:D}];export{He as HOME_ROUTES};
