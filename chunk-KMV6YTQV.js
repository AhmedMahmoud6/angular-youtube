import{a as h,b as A,c as L,d as $,e as k,g as j}from"./chunk-SV7DD3LF.js";import{$ as f,Aa as z,Da as H,E as w,F as C,G as o,H as T,I as _,L as v,R as d,S as n,T as a,U as p,Y as E,_ as N,fa as M,ia as m,ja as c,la as R,na as P,oa as F,pa as O,r as g,s as S,t as y,ua as U,va as Y,y as u}from"./chunk-BUGPBLP4.js";var B=i=>["/video",i];function G(i,t){if(i&1&&(n(0,"div",14),p(1,"img",15),n(2,"p"),m(3),a()()),i&2){let e,r=t.ngIf,l=f(2);M("opacity",l.previewVisible()?0:1)("transition","opacity 0.28s ease"),o(),d("src",r,w)("alt",(e=l.finalVideo().videoDetails.snippet)==null?null:e.title),o(2),c(l.formatYouTubeDuration(l.finalVideo().videoDetails.contentDetails.duration))}}function J(i,t){if(i&1&&(n(0,"div",16),p(1,"iframe",17),a()),i&2){let e=t.ngIf;o(),d("src",e,C)}}function K(i,t){if(i&1){let e=E();n(0,"div",1),N("mouseenter",function(){S(e);let l=f();return y(l.showPreview())})("mouseleave",function(){S(e);let l=f();return y(l.hidePreview())}),n(1,"div",2),v(2,G,4,7,"div",3)(3,J,2,1,"div",4),a(),n(4,"div",5)(5,"div",6),p(6,"img",7),a(),n(7,"div",8)(8,"div",9),m(9),a(),n(10,"div",10),m(11),a(),n(12,"div",11)(13,"p",12),m(14),a(),n(15,"span"),m(16,"\u2022"),a(),n(17,"p",13),m(18),a()()()()()}if(i&2){let e,r,l,D,x,I,s=f();d("routerLink",R(8,B,s.finalVideo().videoDetails.id)),o(2),d("ngIf",(e=s.finalVideo())==null||e.videoDetails==null||e.videoDetails.snippet==null||e.videoDetails.snippet.thumbnails==null||e.videoDetails.snippet.thumbnails.maxres==null?null:e.videoDetails.snippet.thumbnails.maxres.url),o(),d("ngIf",s.iframeSrc()),o(3),d("src",(r=s.finalVideo())==null?null:r.channelProfilePic,w),o(3),c((l=s.finalVideo())==null?null:l.videoDetails.snippet.title),o(2),c((D=s.finalVideo())==null?null:D.videoDetails.snippet.channelTitle),o(3),c(s.formatViews((x=s.finalVideo())==null?null:x.videoDetails.statistics.viewCount)),o(4),c(s.timeAgo((I=s.finalVideo())==null?null:I.videoDetails.snippet.publishedAt))}}var V=class i{constructor(t){this.youtubeService=t}video=O();channel=u([]);finalVideo=u(void 0);previewVisible=u(!1);iframeSrc=u(null);timerId;sanitizer=g(z);formatViews=L;timeAgo=A;formatYouTubeDuration=k;ngOnInit(){let t=this.video();t?.snippet.channelId&&this.youtubeService.getChannel(t.snippet.channelId).subscribe(e=>{this.channel.set(e.items),this.finalVideo.set($(this.video(),this.channel()))})}showPreview(){this.timerId=setTimeout(()=>{let t=this.finalVideo()?.videoDetails?.id;if(!t)return;let e=new URLSearchParams({autoplay:"1",mute:"1",controls:"0",rel:"0",modestbranding:"1",playsinline:"1",loop:"1",playlist:t}),r=`https://www.youtube.com/embed/${t}?${e.toString()}`;this.iframeSrc.set(this.sanitizer.bypassSecurityTrustResourceUrl(r)),this.previewVisible.set(!0)},300)}hidePreview(){this.previewVisible.set(!1),this.iframeSrc.set(null),clearTimeout(this.timerId)}static \u0275fac=function(e){return new(e||i)(T(h))};static \u0275cmp=_({type:i,selectors:[["app-video-card"]],inputs:{video:[1,"video"]},decls:1,vars:1,consts:[["class","video card ",3,"routerLink","mouseenter","mouseleave",4,"ngIf"],[1,"video","card",3,"mouseenter","mouseleave","routerLink"],[1,"video-media"],["class","video-img",3,"opacity","transition",4,"ngIf"],["class","video-preview",4,"ngIf"],[1,"video-info"],[1,"left-side"],["alt","Channel pfp",3,"src"],[1,"center"],[1,"video-title"],[1,"channel-title"],[1,"video-more-info"],[1,"video-views"],[1,"video-date"],[1,"video-img"],[3,"src","alt"],[1,"video-preview"],["width","100%","height","100%","frameborder","0","allow","autoplay; encrypted-media; picture-in-picture","allowfullscreen","",3,"src"]],template:function(e,r){e&1&&v(0,K,19,10,"div",0),e&2&&d("ngIf",r.finalVideo())},dependencies:[Y,H],encapsulation:2})};function Q(i,t){if(i&1&&p(0,"app-video-card",2),i&2){let e=t.$implicit;d("video",e)}}var b=class i{youtubeService=g(h);videos$=this.youtubeService.getVideos();videosResponse=j(this.videos$,{initialValue:null});videos=P(()=>this.videosResponse()?.items??[]);constructor(){F(()=>{console.log(this.videos())})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["app-home"]],decls:2,vars:1,consts:[[1,"app-container"],[3,"video",4,"ngFor","ngForOf"],[3,"video"]],template:function(e,r){e&1&&(n(0,"div",0),v(1,Q,1,1,"app-video-card",1),a()),e&2&&(o(),d("ngForOf",r.videos()))},dependencies:[V,U],encapsulation:2})};var Se=[{path:"",component:b}];export{Se as HOME_ROUTES};
