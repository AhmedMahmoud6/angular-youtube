import{a as V,b as q,c as B,d as G,e as J,g as K,i as X,j as ee}from"./chunk-UQHYB2DO.js";import{B as m,D as T,Ea as Z,Fa as b,I as _,J as E,K as l,L as N,M as h,Ma as j,P as c,Pa as $,R as M,V as s,W as r,X as a,Y as p,aa as P,ba as O,da as R,fa as k,ga as v,ja as L,ka as U,la as F,ma as H,na as W,qa as u,ra as f,t as g,u as D,ua as A,v as I,va as Y,ya as z,za as Q}from"./chunk-OQORQ52J.js";var oe=i=>["/video",i];function re(i,t){if(i&1&&(r(0,"div",15),p(1,"img",16),r(2,"p"),u(3),a()()),i&2){let e,n=t.ngIf,o=v(2);W("opacity",o.previewVisible()?0:1)("transition","opacity 0.28s ease"),l(),s("src",n,_)("alt",(e=o.finalVideo().videoDetails.snippet)==null?null:e.title),l(2),f(o.formatYouTubeDuration(o.finalVideo().videoDetails.contentDetails.duration))}}function le(i,t){if(i&1&&(r(0,"div",15),p(1,"img",16),a()),i&2){let e,n,o=v(2);l(),s("src",(e=o.finalVideo())==null||e.videoDetails==null||e.videoDetails.snippet==null||e.videoDetails.snippet.thumbnails==null||e.videoDetails.snippet.thumbnails.high==null?null:e.videoDetails.snippet.thumbnails.high.url,_)("alt",(n=o.finalVideo())==null||n.videoDetails==null||n.videoDetails.snippet==null?null:n.videoDetails.snippet.title)}}function ae(i,t){if(i&1&&(r(0,"div",17),p(1,"iframe",18),a()),i&2){let e=t.ngIf;l(),s("src",e,E)}}function se(i,t){if(i&1){let e=R();r(0,"div",2),k("mouseenter",function(){D(e);let o=v();return I(o.showPreview())})("mouseleave",function(){D(e);let o=v();return I(o.hidePreview())}),r(1,"div",3),c(2,re,4,7,"div",4)(3,le,2,2,"ng-template",null,0,Y)(5,ae,2,1,"div",5),a(),r(6,"div",6)(7,"div",7),p(8,"img",8),a(),r(9,"div",9)(10,"div",10),u(11),a(),r(12,"div",11),u(13),a(),r(14,"div",12)(15,"p",13),u(16),a(),r(17,"span"),u(18,"\u2022"),a(),r(19,"p",14),u(20),a()()()()()}if(i&2){let e,n,o,w,x,C,ie=H(4),d=v();s("routerLink",A(9,oe,d.finalVideo().videoDetails.id)),l(2),s("ngIf",(e=d.finalVideo())==null||e.videoDetails==null||e.videoDetails.snippet==null||e.videoDetails.snippet.thumbnails==null||e.videoDetails.snippet.thumbnails.maxres==null?null:e.videoDetails.snippet.thumbnails.maxres.url)("ngIfElse",ie),l(3),s("ngIf",d.iframeSrc()),l(3),s("src",(n=d.finalVideo())==null?null:n.channelProfilePic,_),l(3),f((o=d.finalVideo())==null?null:o.videoDetails.snippet.title),l(2),f((w=d.finalVideo())==null?null:w.videoDetails.snippet.channelTitle),l(3),f(d.formatViews((x=d.finalVideo())==null?null:x.videoDetails.statistics.viewCount)),l(4),f(d.timeAgo((C=d.finalVideo())==null?null:C.videoDetails.snippet.publishedAt))}}var S=class i{constructor(t){this.youtubeService=t}video=Q();channel=m([]);finalVideo=m(void 0);previewVisible=m(!1);iframeSrc=m(null);timerId;sanitizer=g(j);formatViews=B;timeAgo=q;formatYouTubeDuration=J;ngOnInit(){let t=this.video();t?.snippet.channelId&&this.youtubeService.getChannel(t.snippet.channelId).subscribe(e=>{this.channel.set(e.items),this.finalVideo.set(G(this.video(),this.channel()))})}showPreview(){this.timerId=setTimeout(()=>{let t=this.finalVideo()?.videoDetails?.id;if(!t)return;let e=new URLSearchParams({autoplay:"1",mute:"1",controls:"0",rel:"0",modestbranding:"1",playsinline:"1",loop:"1",playlist:t}),n=`https://www.youtube.com/embed/${t}?${e.toString()}`;this.iframeSrc.set(this.sanitizer.bypassSecurityTrustResourceUrl(n)),this.previewVisible.set(!0)},300)}hidePreview(){this.previewVisible.set(!1),this.iframeSrc.set(null),clearTimeout(this.timerId)}static \u0275fac=function(e){return new(e||i)(N(V))};static \u0275cmp=h({type:i,selectors:[["app-video-card"]],inputs:{video:[1,"video"]},decls:1,vars:1,consts:[["fallbackImg",""],["class","video card ",3,"routerLink","mouseenter","mouseleave",4,"ngIf"],[1,"video","card",3,"mouseenter","mouseleave","routerLink"],[1,"video-media"],["class","video-img",3,"opacity","transition",4,"ngIf","ngIfElse"],["class","video-preview",4,"ngIf"],[1,"video-info"],[1,"left-side"],["alt","Channel pfp",3,"src"],[1,"center"],[1,"video-title"],[1,"channel-title"],[1,"video-more-info"],[1,"video-views"],[1,"video-date"],[1,"video-img"],[3,"src","alt"],[1,"video-preview"],["width","100%","height","100%","frameborder","0","allow","autoplay; encrypted-media; picture-in-picture","allowfullscreen","",3,"src"]],template:function(e,n){e&1&&c(0,se,21,11,"div",1),e&2&&s("ngIf",n.finalVideo())},dependencies:[b,$],encapsulation:2})};var de=["sentinel"];function me(i,t){if(i&1&&p(0,"app-video-card",5),i&2){let e=t.$implicit;s("video",e)}}function pe(i,t){i&1&&(P(0),r(1,"div",6),p(2,"mat-progress-spinner",7),a(),O())}var y=class i{youtubeService=g(V);ngZone=g(M);videos=m([]);nextPageToken=m(void 0);isLoading=m(!1);error=m(null);observer;sentinel;ngAfterViewInit(){K(this.isLoading,this.nextPageToken,this.youtubeService,this.observer,"videos",this.error,this.videos),this.observer=X(this.sentinel,this.ngZone,this.isLoading,this.nextPageToken,this.youtubeService,"videos",this.error,this.videos,void 0,void 0)}ngOnDestroy(){this.observer?.disconnect()}constructor(){z(()=>{console.log(this.videos())})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-home"]],viewQuery:function(e,n){if(e&1&&L(de,5,T),e&2){let o;U(o=F())&&(n.sentinel=o.first)}},decls:5,vars:2,consts:[["sentinel",""],[1,"app-container"],[3,"video",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"sentinel"],[3,"video"],[1,"loading-spinner"],["mode","indeterminate","diameter","50","strokeWidth","4"]],template:function(e,n){e&1&&(r(0,"div",1),c(1,me,1,1,"app-video-card",2),a(),c(2,pe,3,0,"ng-container",3),p(3,"div",4,0)),e&2&&(l(),s("ngForOf",n.videos()),l(),s("ngIf",n.isLoading()))},dependencies:[S,Z,ee,b],encapsulation:2})};var We=[{path:"",component:y}];export{We as HOME_ROUTES};
