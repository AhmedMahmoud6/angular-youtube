import{C as P,Da as R,E as z,F as H,G,Ga as se,H as Q,Ha as oe,Ja as x,Ka as ae,L as h,N as Y,Q as q,T as S,W as E,X as f,Y as y,Z as D,a as l,b as v,da as T,g as B,h as F,ha as X,ka as Z,la as J,m as I,ma as ee,n as L,na as te,oa as A,pa as re,q as w,qa as ie,s as C,t as U,u as d,va as ne,x as O,y as K}from"./chunk-SCW44YCL.js";var W={production:!1,apiKey:"AIzaSyB59lAtfu3eg_SIB0LhE35agb5u7YJdkxU",videosUrl:"https://www.googleapis.com/youtube/v3",channelUrl:"https://www.googleapis.com/youtube/v3/channels"};var ce=class t{constructor(r){this.http=r}apiKey=W.apiKey;apiUrl=W.videosUrl;channelUrl=W.channelUrl;homeVideoCategoryId=P(void 0);isVideoFromHome=P(!0);params={part:"snippet,statistics,contentDetails",chart:"mostPopular",regionCode:"EG"};videoParams={part:"snippet,statistics,contentDetails"};getVideos(r){let e=v(l(l({},this.params),r?{pageToken:r}:{}),{maxResults:"5"}),n=new x({fromObject:e});return this.http.get(`${this.apiUrl}/videos?key=${this.apiKey}`,{params:n})}getSuggestedVideos(r,e){let n=v(l(l(l({},this.params),r?{pageToken:r}:{}),e?{videoCategoryId:e}:{}),{maxResults:"5"}),i=new x({fromObject:n});return this.http.get(`${this.apiUrl}/videos?key=${this.apiKey}`,{params:i})}getVideoById(r){return this.http.get(`${this.apiUrl}/videos?key=${this.apiKey}&id=${r}`,{params:this.videoParams})}getChannel(r){return this.http.get(`${this.channelUrl}?key=${this.apiKey}&id=${r}&part=brandingSettings`,{params:this.videoParams})}getVideoComments(r,e){if(!r)return console.error("getVideoComments called without videoId!"),F(()=>new Error("videoId is required"));let n=v(l({part:"snippet",order:"relevance"},e?{pageToken:e}:{}),{videoId:r,maxResults:"5"}),i=new x({fromObject:n});return this.http.get(`${this.apiUrl}/commentThreads?key=${this.apiKey}`,{params:i})}getCommentReplies(r,e){let n=v(l({part:"snippet"},r?{pageToken:r}:{}),{parentId:e,maxResults:"5"}),i=new x({fromObject:n});return this.http.get(`${this.apiUrl}/comments?key=${this.apiKey}`,{params:i})}getVideoSuggestions(r,e,n){let i=e?.join(" "),s=v(l(l({part:"snippet",type:"video"},r?{pageToken:r}:{}),i?{q:i}:{}),{maxResults:"5"}),c=new x({fromObject:s});return this.http.get(`${this.apiUrl}/search?key=${this.apiKey}`,{params:c})}static \u0275fac=function(e){return new(e||t)(U(ae))};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})};function De(t){let r=new Date(t),n=(new Date().getTime()-r.getTime())/1e3,i={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1};for(let s in i){let c=Math.floor(n/i[s]);if(c>=1)return`${c} ${s}${c>1?"s":""} ago`}return"just now"}function Ne(t,r="views"){let e=typeof t=="string"?parseInt(t):t;return e>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+`B ${r}`:e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+`M ${r}`:e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+`K ${r}`:e+` ${r}`}function je(t,r){let e=r[0];return{videoDetails:{contentDetails:{duration:t.contentDetails.duration},statistics:{viewCount:t.statistics.viewCount,commentCount:t.statistics.commentCount,likeCount:t.statistics.likeCount,subscriberCount:e.statistics.subscriberCount},snippet:{thumbnails:t.snippet.thumbnails,channelId:t.snippet.channelId,title:t.snippet.title,channelTitle:t.snippet.channelTitle,publishedAt:t.snippet.publishedAt,description:t.snippet.description,tags:t.snippet.tags,categoryId:t.snippet.categoryId},id:t.id,brandingSettings:{image:{bannerExternalUrl:e.brandingSettings.image?.bannerExternalUrl??""}}},channelId:e.id,channelProfilePic:e.snippet.thumbnails.default?.url??""}}function $e(t){let r=t.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/),e=parseInt(r?.[1]||"0",10),n=parseInt(r?.[2]||"0",10),i=parseInt(r?.[3]||"0",10);return e>0?`${e}:${n.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`:`${n}:${i.toString().padStart(2,"0")}`}function Be(t){if(t==null)return"N/A subscribers";let r=typeof t=="string"?parseInt(t):t;return isNaN(r)||r<0?"0 subscribers":r>=1e9?(r/1e9).toFixed(1).replace(/\.0$/,"")+"B subscribers":r>=1e6?(r/1e6).toFixed(1).replace(/\.0$/,"")+"M subscribers":r>=1e3?(r/1e3).toFixed(1).replace(/\.0$/,"")+"K subscribers":r+" subscribers"}function ge(t,r,e,n,i,s,c,o,M,u,m,b,k,V){if(console.log("Loading",n),n==="videos"){if(t()||r()===null&&s().length>0)return;t.set(!0);let p=r()??void 0;e.getVideos(p).pipe(I(1)).subscribe({next:a=>{let g=a.items??[];s?.set([...s(),...g]),r.set(a.nextPageToken??null)},error:a=>{console.error(a),i?.set("Failed To Load Videos")},complete:()=>t.set(!1)});return}else if(n==="comments"){if(!o){console.warn("loadMore: missing videoId -> abort");return}if(t()){console.log("loadMore: already loading -> abort");return}if(r()===null&&c().length>0){console.log("loadMore: nextPageToken is null and have items -> abort");return}t.set(!0);let p=r()??void 0;e.getVideoComments(o,p).pipe(I(1)).subscribe({next:a=>{let g=a.items??[];c?.set([...c(),...g]),r.set(a.nextPageToken??null),a.nextPageToken},error:a=>{console.error("loadMore: comments error",a),i?.set("Failed To Load Comments")},complete:()=>{t.set(!1)}});return}else if(n==="suggested"){if(b()){console.log("loadMore: already loading -> abort");return}if(m()===null&&u().length>0){console.log("loadMore: nextPageToken is null and have items -> abort");return}b.set(!0);let p=m()??void 0;console.log("Inside suggested"),e.getVideoSuggestions(p,M).pipe(I(1),L(a=>{if(a.items.length===0){let g=e.homeVideoCategoryId?.();return e.isVideoFromHome()||e.homeVideoCategoryId.set(void 0),e.getSuggestedVideos(p,g??V?.())}return B(a)})).subscribe({next:a=>{let g=a.items;u?.set([...u(),...g]),m?.set(a.nextPageToken),a.nextPageToken},error:a=>{console.error("loadMore: comments error",a),k?.set("Failed To Load Comments")},complete:()=>{b?.set(!1)}});return}}function Ue(t,r,e,n,i,s){if(i().get(e)??!1)return;let o=s().get(e)??void 0;if(o===null)return;let M=new Map(i());M.set(e,!0),i.set(M),t.getCommentReplies(o,e).pipe(I(1)).subscribe({next:u=>{let m=u.items??[],b=new Map(s());if(b.set(e,u?.nextPageToken??null),s.set(b),m.length>0){let k=new Map(r()),V=k.get(e)??[];k.set(e,[...V,...m]),r.set(k);let p=new Map(i());p.set(e,!1),i.set(p)}},error:u=>{console.error("loadMore: comments error",u),n?.set("Failed To Load Comments");let m=new Map(i());m.set(e,!1),i.set(m)}})}function Ke(t,r){let e=new WeakMap,n=new IntersectionObserver(i=>{for(let s of i){if(!s.isIntersecting)continue;let c=s.target,o=e.get(c);o&&t.run(()=>{ge(o.isLoading,o.nextPageToken,o.youtubeService,o.loadWhat,o.error,o.videos,o.comments,o.videoId,o.videoTags,o.suggestedVideos,o.suggestedNextPageToken,o.suggestedIsLoading,o.suggestedError,o.videoCategoryId)})}},r);return{observer:n,observeElement(i,s){e.set(i,s),n.observe(i)},unobserveElement(i){e.delete(i),n.unobserve(i)},disconnect(){n.disconnect(),e=new WeakMap}}}var j;try{j=typeof Intl<"u"&&Intl.v8BreakIterator}catch{j=!1}var de=(()=>{class t{_platformId=d(H);isBrowser=this._platformId?oe(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||j)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var le=new Set,_,$=(()=>{class t{_platform=d(de);_nonce=d(Q,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):fe}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&he(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function he(t,r){if(!le.has(t))try{_||(_=document.createElement("style"),r&&_.setAttribute("nonce",r),_.setAttribute("type","text/css"),document.head.appendChild(_)),_.sheet&&(_.sheet.insertRule(`@media ${t} {body{ }}`,0),le.add(t))}catch(e){console.error(e)}}function fe(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var _e=new C("MATERIAL_ANIMATIONS");var me=null;function pe(){return d(_e,{optional:!0})?.animationsDisabled||d(G,{optional:!0})==="NoopAnimations"?"di-disabled":(me??=d($).matchMedia("(prefers-reduced-motion)").matches,me?"reduced-motion":"enabled")}var be=["determinateSpinner"];function ve(t,r){if(t&1&&(O(),f(0,"svg",11),D(1,"circle",12),y()),t&2){let e=X();S("viewBox",e._viewBox()),h(),A("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),S("r",e._circleRadius())}}var we=new C("mat-progress-spinner-default-options",{providedIn:"root",factory:Se});function Se(){return{diameter:ue}}var ue=100,ye=10,bt=(()=>{class t{_elementRef=d(z);_noopAnimations;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";_determinateCircle;constructor(){let e=d(we),n=pe(),i=this._elementRef.nativeElement;this._noopAnimations=n==="di-disabled"&&!!e&&!e._forceAnimations,this.mode=i.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",!this._noopAnimations&&n==="reduced-motion"&&i.classList.add("mat-progress-spinner-reduced-motion"),e&&(e.color&&(this.color=this._defaultColor=e.color),e.diameter&&(this.diameter=e.diameter),e.strokeWidth&&(this.strokeWidth=e.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}_value=0;get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}_diameter=ue;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_strokeWidth;_circleRadius(){return(this.diameter-ye)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Y({type:t,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(n,i){if(n&1&&Z(be,5),n&2){let s;J(s=ee())&&(i._determinateCircle=s.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(n,i){n&2&&(S("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",i.mode==="determinate"?i.value:null)("mode",i.mode),ie("mat-"+i.color),A("width",i.diameter,"px")("height",i.diameter,"px")("--mat-progress-spinner-size",i.diameter+"px")("--mat-progress-spinner-active-indicator-width",i.diameter+"px"),re("_mat-animation-noopable",i._noopAnimations)("mdc-circular-progress--indeterminate",i.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",R],diameter:[2,"diameter","diameter",R],strokeWidth:[2,"strokeWidth","strokeWidth",R]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(n,i){if(n&1&&(q(0,ve,2,8,"ng-template",null,0,ne),f(2,"div",2,1),O(),f(4,"svg",3),D(5,"circle",4),y()(),K(),f(6,"div",5)(7,"div",6)(8,"div",7),T(9,8),y(),f(10,"div",9),T(11,8),y(),f(12,"div",10),T(13,8),y()()()),n&2){let s=te(1);h(4),S("viewBox",i._viewBox()),h(),A("stroke-dasharray",i._strokeCircumference(),"px")("stroke-dashoffset",i._strokeDashOffset(),"px")("stroke-width",i._circleStrokeWidth(),"%"),S("r",i._circleRadius()),h(4),E("ngTemplateOutlet",s),h(2),E("ngTemplateOutlet",s),h(2),E("ngTemplateOutlet",s)}},dependencies:[se],styles:[`.mat-mdc-progress-spinner{--mat-progress-spinner-animation-multiplier: 1;display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mat-progress-spinner-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mat-progress-spinner-reduced-motion{--mat-progress-spinner-animation-multiplier: 1.25}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate calc(1568.2352941176ms*var(--mat-progress-spinner-animation-multiplier)) linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mat-progress-spinner-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin calc(1333ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin calc(1333ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate calc(5332ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}
`],encapsulation:2,changeDetection:0})}return t})();export{ce as a,De as b,Ne as c,je as d,$e as e,Be as f,Ue as g,Ke as h,bt as i};
