import{a as b,b as j,c as $,d as q,e as B,g as G,h as J}from"./chunk-FXDUBLFT.js";import{A as m,Aa as z,C,G as h,Ga as Q,H as T,I as r,J as E,Ja as Z,K as _,N as g,P as N,T as s,U as l,V as a,W as p,_ as M,aa as O,ba as c,ea as P,fa as R,ga as k,ha as L,ia as U,la as u,ma as v,pa as F,qa as A,t as f,ta as H,u as y,ua as W,v as D,za as Y}from"./chunk-LJAEMB3T.js";var ie=i=>["/video",i];function te(i,t){if(i&1&&(l(0,"div",15),p(1,"img",16),l(2,"p"),u(3),a()()),i&2){let e,n=t.ngIf,o=c(2);U("opacity",o.previewVisible()?0:1)("transition","opacity 0.28s ease"),r(),s("src",n,h)("alt",(e=o.finalVideo().videoDetails.snippet)==null?null:e.title),r(2),v(o.formatYouTubeDuration(o.finalVideo().videoDetails.contentDetails.duration))}}function ne(i,t){if(i&1&&(l(0,"div",15),p(1,"img",16),a()),i&2){let e,n,o=c(2);r(),s("src",(e=o.finalVideo())==null||e.videoDetails==null||e.videoDetails.snippet==null||e.videoDetails.snippet.thumbnails==null||e.videoDetails.snippet.thumbnails.high==null?null:e.videoDetails.snippet.thumbnails.high.url,h)("alt",(n=o.finalVideo())==null||n.videoDetails==null||n.videoDetails.snippet==null?null:n.videoDetails.snippet.title)}}function oe(i,t){if(i&1&&(l(0,"div",17),p(1,"iframe",18),a()),i&2){let e=t.ngIf;r(),s("src",e,T)}}function le(i,t){if(i&1){let e=M();l(0,"div",2),O("mouseenter",function(){y(e);let o=c();return D(o.showPreview())})("mouseleave",function(){y(e);let o=c();return D(o.hidePreview())}),l(1,"div",3),g(2,te,4,7,"div",4)(3,ne,2,2,"ng-template",null,0,A)(5,oe,2,1,"div",5),a(),l(6,"div",6)(7,"div",7),p(8,"img",8),a(),l(9,"div",9)(10,"div",10),u(11),a(),l(12,"div",11),u(13),a(),l(14,"div",12)(15,"p",13),u(16),a(),l(17,"span"),u(18,"\u2022"),a(),l(19,"p",14),u(20),a()()()()()}if(i&2){let e,n,o,w,x,I,K=L(4),d=c();s("routerLink",F(9,ie,d.finalVideo().videoDetails.id)),r(2),s("ngIf",(e=d.finalVideo())==null||e.videoDetails==null||e.videoDetails.snippet==null||e.videoDetails.snippet.thumbnails==null||e.videoDetails.snippet.thumbnails.maxres==null?null:e.videoDetails.snippet.thumbnails.maxres.url)("ngIfElse",K),r(3),s("ngIf",d.iframeSrc()),r(3),s("src",(n=d.finalVideo())==null?null:n.channelProfilePic,h),r(3),v((o=d.finalVideo())==null?null:o.videoDetails.snippet.title),r(2),v((w=d.finalVideo())==null?null:w.videoDetails.snippet.channelTitle),r(3),v(d.formatViews((x=d.finalVideo())==null?null:x.videoDetails.statistics.viewCount)),r(4),v(d.timeAgo((I=d.finalVideo())==null?null:I.videoDetails.snippet.publishedAt))}}var V=class i{constructor(t){this.youtubeService=t}video=W();channel=m([]);finalVideo=m(void 0);previewVisible=m(!1);iframeSrc=m(null);timerId;sanitizer=f(Q);formatViews=$;timeAgo=j;formatYouTubeDuration=B;ngOnInit(){let t=this.video();t?.snippet.channelId&&this.youtubeService.getChannel(t.snippet.channelId).subscribe(e=>{this.channel.set(e.items),this.finalVideo.set(q(this.video(),this.channel()))})}showPreview(){this.timerId=setTimeout(()=>{let t=this.finalVideo()?.videoDetails?.id;if(!t)return;let e=new URLSearchParams({autoplay:"1",mute:"1",controls:"0",rel:"0",modestbranding:"1",playsinline:"1",loop:"1",playlist:t}),n=`https://www.youtube.com/embed/${t}?${e.toString()}`;this.iframeSrc.set(this.sanitizer.bypassSecurityTrustResourceUrl(n)),this.previewVisible.set(!0)},300)}hidePreview(){this.previewVisible.set(!1),this.iframeSrc.set(null),clearTimeout(this.timerId)}static \u0275fac=function(e){return new(e||i)(E(b))};static \u0275cmp=_({type:i,selectors:[["app-video-card"]],inputs:{video:[1,"video"]},decls:1,vars:1,consts:[["fallbackImg",""],["class","video card ",3,"routerLink","mouseenter","mouseleave",4,"ngIf"],[1,"video","card",3,"mouseenter","mouseleave","routerLink"],[1,"video-media"],["class","video-img",3,"opacity","transition",4,"ngIf","ngIfElse"],["class","video-preview",4,"ngIf"],[1,"video-info"],[1,"left-side"],["alt","Channel pfp",3,"src"],[1,"center"],[1,"video-title"],[1,"channel-title"],[1,"video-more-info"],[1,"video-views"],[1,"video-date"],[1,"video-img"],[3,"src","alt"],[1,"video-preview"],["width","100%","height","100%","frameborder","0","allow","autoplay; encrypted-media; picture-in-picture","allowfullscreen","",3,"src"]],template:function(e,n){e&1&&g(0,le,21,11,"div",1),e&2&&s("ngIf",n.finalVideo())},dependencies:[z,Z],encapsulation:2})};var re=["sentinel"];function ae(i,t){if(i&1&&p(0,"app-video-card",4),i&2){let e=t.$implicit;s("video",e)}}var S=class i{youtubeService=f(b);ngZone=f(N);videos=m([]);nextPageToken=m(void 0);isLoading=m(!1);error=m(null);observer;sentinel;ngAfterViewInit(){G(this.isLoading,this.nextPageToken,this.youtubeService,this.observer,"videos",this.error,this.videos),this.observer=J(this.sentinel,this.ngZone,this.isLoading,this.nextPageToken,this.youtubeService,"videos",this.error,this.videos,void 0,void 0)}ngOnDestroy(){this.observer?.disconnect()}constructor(){H(()=>{console.log(this.videos())})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["app-home"]],viewQuery:function(e,n){if(e&1&&P(re,5,C),e&2){let o;R(o=k())&&(n.sentinel=o.first)}},decls:4,vars:1,consts:[["sentinel",""],[1,"app-container"],[3,"video",4,"ngFor","ngForOf"],[1,"sentinel"],[3,"video"]],template:function(e,n){e&1&&(l(0,"div",1),g(1,ae,1,1,"app-video-card",2),p(2,"div",3,0),a()),e&2&&(r(),s("ngForOf",n.videos()))},dependencies:[V,Y],encapsulation:2})};var ke=[{path:"",component:S}];export{ke as HOME_ROUTES};
