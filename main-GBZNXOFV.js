import{a as z,b as J,f as X,j as ee,k as te,l as ie,m as re}from"./chunk-MXDPD2MN.js";import{$ as s,C as N,D as d,Ga as P,Ha as L,K as M,Ka as U,La as G,M as q,N as l,P as g,Pa as K,Qa as Q,Ra as W,S as I,Sa as Y,Ta as $,Ua as j,Y as c,Z as n,_ as a,_a as Z,e as k,g as C,ga as S,ia as f,j as x,ja as h,k as E,l as T,ma as A,n as R,na as V,o as D,oa as O,ra as H,ta as w,ua as B,v as b,w as m,x as u,ya as F}from"./chunk-VRIKBWOE.js";var ne=[{path:"",loadChildren:()=>import("./chunk-RQXHDL6H.js").then(r=>r.HOME_ROUTES)},{path:"video/:id",loadChildren:()=>import("./chunk-R4IM2KRZ.js").then(r=>r.VIDEO_DETAILS_ROUTES)},{path:"search",loadComponent:()=>import("./chunk-HRIMAMMR.js").then(r=>r.Search)}];var oe={providers:[N(),F({eventCoalescing:!0}),Y(ne,$({scrollPositionRestoration:"enabled",anchorScrolling:"enabled"})),G()]};var le=["searchInput"];function ce(r,t){if(r&1){let e=S();n(0,"li",20),f("click",function(){let o=m(e).$implicit,p=h(2);return u(p.onResultClick(o.id.videoId))}),n(1,"div",21),s(2,"fa-icon",4),n(3,"p"),w(4),a()(),n(5,"div",22),s(6,"img",23),a()()}if(r&2){let e=t.$implicit,i=t.index,o=h(2);H("selected",i===o.selectedIndex()),l(2),c("icon",o.faMagnifyingGlass),l(2),B(o.decodeHtml(e.snippet.title)),l(2),c("src",e.snippet.thumbnails.default.url,M)}}function pe(r,t){if(r&1&&(n(0,"ul",18),I(1,ce,7,5,"li",19),a()),r&2){let e=h();l(),c("ngForOf",e.queryResults())}}var v=class r{faBars=te;faMagnifyingGlass=J;faMicrophone=X;faAdd=ee;faBell=z;query=d("");q$=new k;queryResults=d([]);youtube=b(j);router=b(Q);decodeHtml=Z;isToggled=d(!1);selectedIndex=d(-1);searchInput;ngOnInit(){this.q$.pipe(T(300),R(),x(t=>t.trim().length>0),D(t=>this.youtube.getSearchResults(t).pipe(E(e=>(console.error("search error",e),C({items:[]})))))).subscribe({next:t=>{this.queryResults.set(t.items)},error:t=>{console.error("unexpected error",t)}})}onDocumentClick(t){this.searchInput.nativeElement.contains(t.target)||this.isToggled.set(!1)}onInputClick(){this.query().length>0&&this.isToggled.set(!0),this.selectedIndex.set(-1)}onKeyDown(t){this.selectedIndex.set(-1);let e=t.target.value;if(this.query.set(e),e.trim()===""){this.isToggled.set(!1);return}console.log(e),this.q$.next(e),this.isToggled()||this.isToggled.set(!0)}onArrowKeys(t){if(t.key==="ArrowDown"){t.preventDefault();let e=this.selectedIndex(),i=e<this.queryResults().length-1?e+1:0;this.selectedIndex.set(i)}if(t.key==="ArrowUp"){t.preventDefault();let e=this.selectedIndex(),i=e>0?e-1:this.queryResults().length-1;this.selectedIndex.set(i)}t.key==="Enter"&&this.selectedIndex()!==-1&&(t.preventDefault(),this.onResultClick(this.queryResults()[this.selectedIndex()].id.videoId),this.isToggled.set(!1)),t.key==="Enter"&&this.selectedIndex()===-1&&(t.preventDefault(),this.navigateToSearchPage())}navigateToSearchPage(){this.query()&&(this.router.navigate(["/search"],{queryParams:{q:this.query()},queryParamsHandling:"merge"}),this.isToggled.set(!1))}onResultClick(t){this.router.navigate(["/video",t])}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=g({type:r,selectors:[["app-navbar"]],viewQuery:function(e,i){if(e&1&&A(le,5),e&2){let o;V(o=O())&&(i.searchInput=o.first)}},hostBindings:function(e,i){e&1&&f("click",function(p){return i.onDocumentClick(p)},q)},decls:24,vars:6,consts:[["searchInput",""],[1,"nav"],[1,"nav-left-side"],[1,"menu"],[3,"icon"],["routerLink","",1,"logo"],["referrerpolicy","no-referrer","src","https://upload.wikimedia.org/wikipedia/commons/0/0b/YouTube_2024_%28white_text%29.svg","alt","YouTube Logo"],[1,"nav-center"],[1,"search-parent"],["type","text","placeholder","Search",1,"search-input",3,"input","keydown","click"],[1,"search-icon",3,"click"],["class","search-list",4,"ngIf"],[1,"voice"],[1,"nav-right-side"],[1,"create"],[1,"notification"],[1,"profile"],["src","https://lh3.googleusercontent.com/ogw/AF2bZyhcgXoCv3FWafVkRRnRDRmyupy6E8xwSrQJUq0fDtqSrA=s64-c-mo","alt","pfp","referrerpolicy","no-referrer"],[1,"search-list"],[3,"selected","click",4,"ngFor","ngForOf"],[3,"click"],[1,"list-left"],[1,"list-right"],["alt","video thumbnail",3,"src"]],template:function(e,i){if(e&1){let o=S();n(0,"div",1)(1,"div",2)(2,"div",3),s(3,"fa-icon",4),a(),n(4,"div",5),s(5,"img",6),a()(),n(6,"div",7)(7,"div",8)(8,"input",9,0),f("input",function(_){return m(o),u(i.onKeyDown(_))})("keydown",function(_){return m(o),u(i.onArrowKeys(_))})("click",function(){return m(o),u(i.onInputClick())}),a(),n(10,"div",10),f("click",function(){return m(o),u(i.navigateToSearchPage())}),s(11,"fa-icon",4),a(),I(12,pe,2,1,"ul",11),a(),n(13,"div",12),s(14,"fa-icon",4),a()(),n(15,"div",13)(16,"div",14),s(17,"fa-icon",4),n(18,"p"),w(19,"Create"),a()(),n(20,"div",15),s(21,"fa-icon",4),a(),n(22,"div",16),s(23,"img",17),a()()()}e&2&&(l(3),c("icon",i.faBars),l(8),c("icon",i.faMagnifyingGlass),l(),c("ngIf",i.isToggled()),l(2),c("icon",i.faMicrophone),l(3),c("icon",i.faAdd),l(4),c("icon",i.faBell))},dependencies:[re,ie,W,L,P],encapsulation:2})};var y=class r{title=d("youtube");static \u0275fac=function(e){return new(e||r)};static \u0275cmp=g({type:r,selectors:[["app-root"]],decls:2,vars:0,template:function(e,i){e&1&&s(0,"app-navbar")(1,"router-outlet")},dependencies:[K,v],encapsulation:2})};U(y,oe).catch(r=>console.error(r));
