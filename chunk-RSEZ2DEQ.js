import{e as M,f as $,j as A}from"./chunk-DEZ5KXDJ.js";import{Ba as a,Ca as s,Da as l,Ea as d,Ha as F,Ia as f,J as S,Ja as v,M as x,Na as O,Oa as U,Y as u,ha as C,ia as r,na as g,ra as h,ta as b}from"./chunk-WDJW3MQ2.js";function N(e){let t=new Date(e),n=(new Date().getTime()-t.getTime())/1e3,o={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1};for(let c in o){let p=Math.floor(n/o[c]);if(p>=1)return`${p} ${c}${p>1?"s":""} ago`}return"just now"}function T(e){let t=typeof e=="string"?parseInt(e):e;return t>=1e9?(t/1e9).toFixed(1).replace(/\.0$/,"")+"B views":t>=1e6?(t/1e6).toFixed(1).replace(/\.0$/,"")+"M views":t>=1e3?(t/1e3).toFixed(1).replace(/\.0$/,"")+"K views":t+" views"}function E(e,t){let i=t[0];return{videoDetails:{statistics:{viewCount:e.statistics.viewCount,commentCount:e.statistics.commentCount,likeCount:e.statistics.likeCount},snippet:{thumbnails:e.snippet.thumbnails,channelId:e.snippet.channelId,title:e.snippet.title,channelTitle:e.snippet.channelTitle,publishedAt:e.snippet.publishedAt,description:e.snippet.description},id:e.id},channelId:i.id,channelProfilePic:i.snippet.thumbnails.default?.url??""}}var V={production:!1,apiKey:"AIzaSyDWsKhi_G5QGsBNKcCpXmf7ARoU19ues2M",videosUrl:"https://www.googleapis.com/youtube/v3",channelUrl:"https://www.googleapis.com/youtube/v3/channels"};var m=class e{constructor(t){this.http=t}apiKey=V.apiKey;apiUrl=V.videosUrl;channelUrl=V.channelUrl;getVideos(t){return this.http.get(`${this.apiUrl}/videos?key=${this.apiKey}`,{params:t})}getChannel(t){return this.http.get(`${this.channelUrl}?key=${this.apiKey}&id=${t}&part=snippet`)}static \u0275fac=function(i){return new(i||e)(x(A))};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})};function P(e,t){if(e&1&&(s(0,"div",12),d(1,"img",13),l()),e&2){let i,n=t.ngIf,o=F();r(),a("src",n,C)("alt",(i=o.finalVideo().videoDetails.snippet)==null?null:i.title)}}var _=class e{constructor(t){this.youtubeService=t}video=U();channel=u([]);finalVideo=u(void 0);formatViews=T;timeAgo=N;ngOnInit(){let t=this.video();t?.snippet.channelId&&this.youtubeService.getChannel(t.snippet.channelId).subscribe(i=>{this.channel.set(i.items),this.finalVideo.set(E(this.video(),this.channel()))})}static \u0275fac=function(i){return new(i||e)(g(m))};static \u0275cmp=h({type:e,selectors:[["app-video-card"]],inputs:{video:[1,"video"]},decls:16,vars:6,consts:[[1,"video"],["class","video-img",4,"ngIf"],[1,"video-info"],[1,"left-side"],["alt","Channel pfp",3,"src"],[1,"center"],[1,"video-title"],[1,"channel-title"],[1,"video-more-info"],[1,"video-views"],[1,"video-date"],[1,"right-side"],[1,"video-img"],[3,"src","alt"]],template:function(i,n){if(i&1&&(s(0,"div",0),b(1,P,2,2,"div",1),s(2,"div",2)(3,"div",3),d(4,"img",4),l(),s(5,"div",5)(6,"div",6),f(7),l(),s(8,"div",7),f(9),l(),s(10,"div",8)(11,"p",9),f(12),l(),s(13,"p",10),f(14),l()()(),d(15,"div",11),l()()),i&2){let o,c,p,I,w,D;r(),a("ngIf",(o=n.finalVideo())==null||o.videoDetails==null||o.videoDetails.snippet==null||o.videoDetails.snippet.thumbnails==null||o.videoDetails.snippet.thumbnails.high==null?null:o.videoDetails.snippet.thumbnails.high.url),r(3),a("src",(c=n.finalVideo())==null?null:c.channelProfilePic,C),r(3),v((p=n.finalVideo())==null?null:p.videoDetails.snippet.title),r(2),v((I=n.finalVideo())==null?null:I.videoDetails.snippet.channelTitle),r(3),v(n.formatViews((w=n.finalVideo())==null?null:w.videoDetails.statistics.viewCount)),r(2),v(n.timeAgo((D=n.finalVideo())==null?null:D.videoDetails.snippet.publishedAt))}},dependencies:[$],encapsulation:2})};function j(e,t){if(e&1&&d(0,"app-video-card",1),e&2){let i=t.$implicit;a("video",i)}}var y=class e{constructor(t){this.youtubeService=t;O(()=>{console.log(this.videos())})}videos=u([]);ngOnInit(){let t={part:"snippet,statistics,contentDetails",chart:"mostPopular",regionCode:"EG",maxResults:10};this.youtubeService.getVideos(t).subscribe(i=>this.videos.set(i.items))}static \u0275fac=function(i){return new(i||e)(g(m))};static \u0275cmp=h({type:e,selectors:[["app-home"]],decls:1,vars:1,consts:[[3,"video",4,"ngFor","ngForOf"],[3,"video"]],template:function(i,n){i&1&&b(0,j,1,1,"app-video-card",0),i&2&&a("ngForOf",n.videos())},dependencies:[_,M],encapsulation:2})};var le=[{path:"",component:y}];export{le as HOME_ROUTES};
