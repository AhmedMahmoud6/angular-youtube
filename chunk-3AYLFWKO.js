import{E as B,Ea as T,F as L,G as V,H as j,Ha as Z,Ia as $,M as g,O as F,R as z,U as b,X as k,Y as f,Z as v,_ as W,ea as I,g as N,ia as Q,la as G,m as S,ma as H,na as K,o as O,oa as U,pa as E,qa as Y,r as y,ra as X,t as M,u as c,wa as q,x as C,y as P}from"./chunk-NLIL6CV2.js";function oe(r,s,e,i,t,a,_,n,x,m,d,p,w,A){if(console.log("Loading",i),i==="videos"){if(r()||s()===null&&a().length>0)return;r.set(!0);let l=s()??void 0;e.getVideos(l).pipe(S(1)).subscribe({next:o=>{let u=o.items??[];a?.set([...a(),...u]),s.set(o.nextPageToken??null)},error:o=>{console.error(o),t?.set("Failed To Load Videos")},complete:()=>r.set(!1)});return}else if(i==="comments"){if(!n){console.warn("loadMore: missing videoId -> abort");return}if(r()){console.log("loadMore: already loading -> abort");return}if(s()===null&&_().length>0){console.log("loadMore: nextPageToken is null and have items -> abort");return}r.set(!0);let l=s()??void 0;e.getVideoComments(n,l).pipe(S(1)).subscribe({next:o=>{let u=o.items??[];_?.set([..._(),...u]),s.set(o.nextPageToken??null),o.nextPageToken},error:o=>{o.status===403&&o.error?.error?.errors?.[0]?.reason==="commentsDisabled"?t?.set("Comments are disabled for this video."):t?.set("An unexpected error occurred."),r.set(!1)},complete:()=>{r.set(!1)}});return}else if(i==="suggested"){if(p()){console.log("loadMore: already loading -> abort");return}if(d()===null&&m().length>0){console.log("loadMore: nextPageToken is null and have items -> abort");return}p.set(!0);let l=d()??void 0;console.log("Inside suggested"),e.getVideoSuggestions(l,x).pipe(S(1),O(o=>{if(o.items.length===0){let u=e.homeVideoCategoryId?.();return e.isVideoFromHome()||e.homeVideoCategoryId.set(void 0),e.getSuggestedVideos(l,u??A?.())}return N(o)})).subscribe({next:o=>{let u=o.items;m?.set([...m(),...u]),d?.set(o.nextPageToken),o.nextPageToken},error:o=>{console.error("loadMore: comments error",o),w?.set("Failed To Load Comments"),p?.set(!1)},complete:()=>{p?.set(!1)}});return}}function fe(r,s,e,i,t,a){if(t().get(e)??!1)return;let n=a().get(e)??void 0;if(n===null)return;let x=new Map(t());x.set(e,!0),t.set(x),r.getCommentReplies(n,e).pipe(S(1)).subscribe({next:m=>{let d=m.items??[],p=new Map(a());if(p.set(e,m?.nextPageToken??null),a.set(p),d.length>0){let w=new Map(s()),A=w.get(e)??[];w.set(e,[...A,...d]),s.set(w);let l=new Map(t());l.set(e,!1),t.set(l)}},error:m=>{console.error("loadMore: comments error",m),i?.set("Failed To Load Comments");let d=new Map(t());d.set(e,!1),t.set(d)}})}function he(r,s){let e=new WeakMap,i=new IntersectionObserver(t=>{for(let a of t){if(!a.isIntersecting)continue;let _=a.target,n=e.get(_);n&&r.run(()=>{oe(n.isLoading,n.nextPageToken,n.youtubeService,n.loadWhat,n.error,n.videos,n.comments,n.videoId,n.videoTags,n.suggestedVideos,n.suggestedNextPageToken,n.suggestedIsLoading,n.suggestedError,n.videoCategoryId)})}},s);return{observer:i,observeElement(t,a){e.set(t,a),i.observe(t)},unobserveElement(t){e.delete(t),i.unobserve(t)},disconnect(){i.disconnect(),e=new WeakMap}}}var R;try{R=typeof Intl<"u"&&Intl.v8BreakIterator}catch{R=!1}var ee=(()=>{class r{_platformId=c(L);isBrowser=this._platformId?$(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||R)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||r)};static \u0275prov=y({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var te=new Set,h,D=(()=>{class r{_platform=c(ee);_nonce=c(j,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):se}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&ae(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=y({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function ae(r,s){if(!te.has(r))try{h||(h=document.createElement("style"),s&&h.setAttribute("nonce",s),h.setAttribute("type","text/css"),document.head.appendChild(h)),h.sheet&&(h.sheet.insertRule(`@media ${r} {body{ }}`,0),te.add(r))}catch(e){console.error(e)}}function se(r){return{matches:r==="all"||r==="",media:r,addListener:()=>{},removeListener:()=>{}}}var ce=new M("MATERIAL_ANIMATIONS");var re=null;function ie(){return c(ce,{optional:!0})?.animationsDisabled||c(V,{optional:!0})==="NoopAnimations"?"di-disabled":(re??=c(D).matchMedia("(prefers-reduced-motion)").matches,re?"reduced-motion":"enabled")}var de=["determinateSpinner"];function le(r,s){if(r&1&&(C(),f(0,"svg",11),W(1,"circle",12),v()),r&2){let e=Q();b("viewBox",e._viewBox()),g(),E("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),b("r",e._circleRadius())}}var me=new M("mat-progress-spinner-default-options",{providedIn:"root",factory:pe});function pe(){return{diameter:ne}}var ne=100,ue=10,Ge=(()=>{class r{_elementRef=c(B);_noopAnimations;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";_determinateCircle;constructor(){let e=c(me),i=ie(),t=this._elementRef.nativeElement;this._noopAnimations=i==="di-disabled"&&!!e&&!e._forceAnimations,this.mode=t.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",!this._noopAnimations&&i==="reduced-motion"&&t.classList.add("mat-progress-spinner-reduced-motion"),e&&(e.color&&(this.color=this._defaultColor=e.color),e.diameter&&(this.diameter=e.diameter),e.strokeWidth&&(this.strokeWidth=e.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}_value=0;get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}_diameter=ne;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_strokeWidth;_circleRadius(){return(this.diameter-ue)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=F({type:r,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(i,t){if(i&1&&G(de,5),i&2){let a;H(a=K())&&(t._determinateCircle=a.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(i,t){i&2&&(b("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",t.mode==="determinate"?t.value:null)("mode",t.mode),X("mat-"+t.color),E("width",t.diameter,"px")("height",t.diameter,"px")("--mat-progress-spinner-size",t.diameter+"px")("--mat-progress-spinner-active-indicator-width",t.diameter+"px"),Y("_mat-animation-noopable",t._noopAnimations)("mdc-circular-progress--indeterminate",t.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",T],diameter:[2,"diameter","diameter",T],strokeWidth:[2,"strokeWidth","strokeWidth",T]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(i,t){if(i&1&&(z(0,le,2,8,"ng-template",null,0,q),f(2,"div",2,1),C(),f(4,"svg",3),W(5,"circle",4),v()(),P(),f(6,"div",5)(7,"div",6)(8,"div",7),I(9,8),v(),f(10,"div",9),I(11,8),v(),f(12,"div",10),I(13,8),v()()()),i&2){let a=U(1);g(4),b("viewBox",t._viewBox()),g(),E("stroke-dasharray",t._strokeCircumference(),"px")("stroke-dashoffset",t._strokeDashOffset(),"px")("stroke-width",t._circleStrokeWidth(),"%"),b("r",t._circleRadius()),g(4),k("ngTemplateOutlet",a),g(2),k("ngTemplateOutlet",a),g(2),k("ngTemplateOutlet",a)}},dependencies:[Z],styles:[`.mat-mdc-progress-spinner{--mat-progress-spinner-animation-multiplier: 1;display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mat-progress-spinner-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mat-progress-spinner-reduced-motion{--mat-progress-spinner-animation-multiplier: 1.25}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate calc(1568.2352941176ms*var(--mat-progress-spinner-animation-multiplier)) linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mat-progress-spinner-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin calc(1333ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin calc(1333ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate calc(5332ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}
`],encapsulation:2,changeDetection:0})}return r})();export{fe as a,he as b,Ge as c};
