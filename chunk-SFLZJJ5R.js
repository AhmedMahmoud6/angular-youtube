import{E as L,Ea as R,F,G as U,H as K,Ha as te,Ia as re,Ka as k,L as g,La as ie,N as z,Q as G,T as v,W as E,X as f,Y as w,Z as P,a as u,b as I,da as T,h as j,ha as H,ka as Q,la as Y,m as x,ma as q,na as X,oa as A,pa as Z,q as b,qa as J,s as C,t as B,u as c,wa as ee,x as O,y as $}from"./chunk-4JN4A7YZ.js";var W={production:!1,apiKey:"AIzaSyDWsKhi_G5QGsBNKcCpXmf7ARoU19ues2M",videosUrl:"https://www.googleapis.com/youtube/v3",channelUrl:"https://www.googleapis.com/youtube/v3/channels"};var ne=class t{constructor(r){this.http=r}apiKey=W.apiKey;apiUrl=W.videosUrl;channelUrl=W.channelUrl;params={part:"snippet,statistics,contentDetails",chart:"mostPopular",regionCode:"EG",maxResults:"20"};videoParams={part:"snippet,statistics,contentDetails"};getVideos(r){let e=u(u({},this.params),r?{pageToken:r}:{}),n=new k({fromObject:e});return this.http.get(`${this.apiUrl}/videos?key=${this.apiKey}`,{params:n})}getVideoById(r){return this.http.get(`${this.apiUrl}/videos?key=${this.apiKey}&id=${r}`,{params:this.videoParams})}getChannel(r){return this.http.get(`${this.channelUrl}?key=${this.apiKey}&id=${r}&part=brandingSettings`,{params:this.videoParams})}getVideoComments(r,e){if(!r)return console.error("getVideoComments called without videoId!"),j(()=>new Error("videoId is required"));let n=I(u({part:"snippet",order:"relevance"},e?{pageToken:e}:{}),{videoId:r}),i=new k({fromObject:n});return this.http.get(`${this.apiUrl}/commentThreads?key=${this.apiKey}`,{params:i})}getCommentReplies(r,e){let n=I(u({part:"snippet"},r?{pageToken:r}:{}),{parentId:e,maxResults:"10"}),i=new k({fromObject:n});return this.http.get(`${this.apiUrl}/comments?key=${this.apiKey}`,{params:i})}getVideoSuggestions(r,e){let n=e?.join("|"),i=I(u(u({part:"snippet",type:"video"},r?{pageToken:r}:{}),n?{q:n}:{}),{maxResults:"20"}),s=new k({fromObject:i});return this.http.get(`${this.apiUrl}/search?key=${this.apiKey}`,{params:s})}static \u0275fac=function(e){return new(e||t)(B(ie))};static \u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"})};function Ee(t){let r=new Date(t),n=(new Date().getTime()-r.getTime())/1e3,i={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1};for(let s in i){let l=Math.floor(n/i[s]);if(l>=1)return`${l} ${s}${l>1?"s":""} ago`}return"just now"}function Te(t,r="views"){let e=typeof t=="string"?parseInt(t):t;return e>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+`B ${r}`:e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+`M ${r}`:e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+`K ${r}`:e+` ${r}`}function Ae(t,r){let e=r[0];return{videoDetails:{contentDetails:{duration:t.contentDetails.duration},statistics:{viewCount:t.statistics.viewCount,commentCount:t.statistics.commentCount,likeCount:t.statistics.likeCount,subscriberCount:e.statistics.subscriberCount},snippet:{thumbnails:t.snippet.thumbnails,channelId:t.snippet.channelId,title:t.snippet.title,channelTitle:t.snippet.channelTitle,publishedAt:t.snippet.publishedAt,description:t.snippet.description,tags:t.snippet.tags},id:t.id,brandingSettings:{image:{bannerExternalUrl:e.brandingSettings.image?.bannerExternalUrl??""}}},channelId:e.id,channelProfilePic:e.snippet.thumbnails.default?.url??""}}function Re(t){let r=t.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/),e=parseInt(r?.[1]||"0",10),n=parseInt(r?.[2]||"0",10),i=parseInt(r?.[3]||"0",10);return e>0?`${e}:${n.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`:`${n}:${i.toString().padStart(2,"0")}`}function We(t){if(t==null)return"N/A subscribers";let r=typeof t=="string"?parseInt(t):t;return isNaN(r)||r<0?"0 subscribers":r>=1e9?(r/1e9).toFixed(1).replace(/\.0$/,"")+"B subscribers":r>=1e6?(r/1e6).toFixed(1).replace(/\.0$/,"")+"M subscribers":r>=1e3?(r/1e3).toFixed(1).replace(/\.0$/,"")+"K subscribers":r+" subscribers"}function me(t,r,e,n,i,s,l,o,M,d,m,_,S){if(console.log("Loading",n),n==="videos"){if(t()||r()===null&&s().length>0)return;t.set(!0);let p=r()??void 0;e.getVideos(p).pipe(x(1)).subscribe({next:a=>{let y=a.items??[];s?.set([...s(),...y]),r.set(a.nextPageToken??null)},error:a=>{console.error(a),i?.set("Failed To Load Videos")},complete:()=>t.set(!1)});return}else if(n==="comments"){if(!o){console.warn("loadMore: missing videoId -> abort");return}if(t()){console.log("loadMore: already loading -> abort");return}if(r()===null&&l().length>0){console.log("loadMore: nextPageToken is null and have items -> abort");return}t.set(!0);let p=r()??void 0;e.getVideoComments(o,p).pipe(x(1)).subscribe({next:a=>{let y=a.items??[];l?.set([...l(),...y]),r.set(a.nextPageToken??null),a.nextPageToken},error:a=>{console.error("loadMore: comments error",a),i?.set("Failed To Load Comments")},complete:()=>{t.set(!1)}});return}else if(n==="suggested"){if(_()){console.log("loadMore: already loading -> abort");return}if(m()===null&&d().length>0){console.log("loadMore: nextPageToken is null and have items -> abort");return}_.set(!0);let p=m()??void 0;console.log("Inside suggested"),e.getVideoSuggestions(p,M).pipe(x(1)).subscribe({next:a=>{let y=a.items;d?.set([...d(),...y]),m?.set(a.nextPageToken),a.nextPageToken},error:a=>{console.error("loadMore: comments error",a),S?.set("Failed To Load Comments")},complete:()=>{_?.set(!1)}});return}}function De(t,r,e,n,i,s){if(i().get(e)??!1)return;let o=s().get(e)??void 0;if(o===null)return;let M=new Map(i());M.set(e,!0),i.set(M),t.getCommentReplies(o,e).pipe(x(1)).subscribe({next:d=>{let m=d.items??[],_=new Map(s());if(_.set(e,d?.nextPageToken??null),s.set(_),m.length>0){let S=new Map(r()),p=S.get(e)??[];S.set(e,[...p,...m]),r.set(S);let a=new Map(i());a.set(e,!1),i.set(a)}},error:d=>{console.error("loadMore: comments error",d),n?.set("Failed To Load Comments");let m=new Map(i());m.set(e,!1),i.set(m)}})}function Ne(t,r){let e=new WeakMap,n=new IntersectionObserver(i=>{for(let s of i){if(!s.isIntersecting)continue;let l=s.target,o=e.get(l);o&&t.run(()=>{me(o.isLoading,o.nextPageToken,o.youtubeService,o.loadWhat,o.error,o.videos,o.comments,o.videoId,o.videoTags,o.suggestedVideos,o.suggestedNextPageToken,o.suggestedIsLoading,o.suggestedError)})}},r);return{observer:n,observeElement(i,s){e.set(i,s),n.observe(i)},unobserveElement(i){e.delete(i),n.unobserve(i)},disconnect(){n.disconnect(),e=new WeakMap}}}var N;try{N=typeof Intl<"u"&&Intl.v8BreakIterator}catch{N=!1}var se=(()=>{class t{_platformId=c(F);isBrowser=this._platformId?re(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||N)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var oe=new Set,h,V=(()=>{class t{_platform=c(se);_nonce=c(K,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):pe}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&de(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function de(t,r){if(!oe.has(t))try{h||(h=document.createElement("style"),r&&h.setAttribute("nonce",r),h.setAttribute("type","text/css"),document.head.appendChild(h)),h.sheet&&(h.sheet.insertRule(`@media ${t} {body{ }}`,0),oe.add(t))}catch(e){console.error(e)}}function pe(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var ue=new C("MATERIAL_ANIMATIONS");var ae=null;function ce(){return c(ue,{optional:!0})?.animationsDisabled||c(U,{optional:!0})==="NoopAnimations"?"di-disabled":(ae??=c(V).matchMedia("(prefers-reduced-motion)").matches,ae?"reduced-motion":"enabled")}var ge=["determinateSpinner"];function fe(t,r){if(t&1&&(O(),f(0,"svg",11),P(1,"circle",12),w()),t&2){let e=H();v("viewBox",e._viewBox()),g(),A("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),v("r",e._circleRadius())}}var he=new C("mat-progress-spinner-default-options",{providedIn:"root",factory:_e});function _e(){return{diameter:le}}var le=100,be=10,mt=(()=>{class t{_elementRef=c(L);_noopAnimations;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";_determinateCircle;constructor(){let e=c(he),n=ce(),i=this._elementRef.nativeElement;this._noopAnimations=n==="di-disabled"&&!!e&&!e._forceAnimations,this.mode=i.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",!this._noopAnimations&&n==="reduced-motion"&&i.classList.add("mat-progress-spinner-reduced-motion"),e&&(e.color&&(this.color=this._defaultColor=e.color),e.diameter&&(this.diameter=e.diameter),e.strokeWidth&&(this.strokeWidth=e.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}_value=0;get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}_diameter=le;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_strokeWidth;_circleRadius(){return(this.diameter-be)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=z({type:t,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(n,i){if(n&1&&Q(ge,5),n&2){let s;Y(s=q())&&(i._determinateCircle=s.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(n,i){n&2&&(v("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",i.mode==="determinate"?i.value:null)("mode",i.mode),J("mat-"+i.color),A("width",i.diameter,"px")("height",i.diameter,"px")("--mat-progress-spinner-size",i.diameter+"px")("--mat-progress-spinner-active-indicator-width",i.diameter+"px"),Z("_mat-animation-noopable",i._noopAnimations)("mdc-circular-progress--indeterminate",i.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",R],diameter:[2,"diameter","diameter",R],strokeWidth:[2,"strokeWidth","strokeWidth",R]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(n,i){if(n&1&&(G(0,fe,2,8,"ng-template",null,0,ee),f(2,"div",2,1),O(),f(4,"svg",3),P(5,"circle",4),w()(),$(),f(6,"div",5)(7,"div",6)(8,"div",7),T(9,8),w(),f(10,"div",9),T(11,8),w(),f(12,"div",10),T(13,8),w()()()),n&2){let s=X(1);g(4),v("viewBox",i._viewBox()),g(),A("stroke-dasharray",i._strokeCircumference(),"px")("stroke-dashoffset",i._strokeDashOffset(),"px")("stroke-width",i._circleStrokeWidth(),"%"),v("r",i._circleRadius()),g(4),E("ngTemplateOutlet",s),g(2),E("ngTemplateOutlet",s),g(2),E("ngTemplateOutlet",s)}},dependencies:[te],styles:[`.mat-mdc-progress-spinner{--mat-progress-spinner-animation-multiplier: 1;display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mat-progress-spinner-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mat-progress-spinner-reduced-motion{--mat-progress-spinner-animation-multiplier: 1.25}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate calc(1568.2352941176ms*var(--mat-progress-spinner-animation-multiplier)) linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mat-progress-spinner-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin calc(1333ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin calc(1333ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate calc(5332ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}
`],encapsulation:2,changeDetection:0})}return t})();export{ne as a,Ee as b,Te as c,Ae as d,Re as e,We as f,De as g,Ne as h,mt as i};
